<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Warsaw Golden Mile ‚Äì Interactive Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Leaflet 1.9.4 -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="anonymous" />

  <style>
    /* === Base layout === */
    html,body{margin:0;padding:0;height:100%;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background:#fafafa}
    #map{height:100%;width:100%}
    .leaflet-popup-content{font-size:.9rem;line-height:1.35}

    /* Marker */
    .marker-order{display:flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:50%;background:#ff6b00;color:#fff;font-weight:700;font-size:.8rem;border:2px solid #fff;box-shadow:0 0 4px rgba(0,0,0,.35)}

    /* Floating panels */
    .panel{z-index:1000;background:#fff;padding:10px 12px;border-radius:12px;box-shadow:0 3px 8px rgba(0,0,0,.22);font-size:.84rem;line-height:1.35;overflow-y:auto;max-height:380px;width:280px}
    .panel h4{margin:0 0 6px;font-size:1rem}

    /* Lists */
    .legend ol,.itinerary ol{padding-left:22px;margin:0}
    .legend li,.itinerary li{margin:0 0 5px}

    /* Recommendations */
    .recs ol{list-style:none;padding:0;margin:0}
    .recs li.bar-item{background:#f7f7f7;border-radius:8px;margin:0 0 6px;padding:8px 10px;cursor:pointer;transition:background .2s,transform .2s}
    .recs li.bar-item:hover{background:#ffe8d9;transform:translateY(-2px)}
    .recs a{color:inherit;text-decoration:underline;word-break:break-word}
    .recs hr{border:0;border-top:1px dashed #ccc;margin:10px 0 8px}
    .recs ul{padding-left:18px;margin:0}
    .recs ul li{margin:0 0 4px}

    /* Scrollbar */
    .panel::-webkit-scrollbar{width:6px}
    .panel::-webkit-scrollbar-thumb{background:#d3d3d3;border-radius:4px}

    /* Mobile tweaks */
    @media(max-width:600px){
      .panel{width:92vw;max-height:48vh;font-size:.95rem}
      .panel h4{font-size:1.05rem}
      .marker-order{width:24px;height:24px;font-size:.7rem}
    }
  </style>

  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
          integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin="anonymous"></script>

  <script defer>
  window.addEventListener('DOMContentLoaded',()=>{
    /* ========= DATA ========= */
    const bars=[
      {order:1,name:"PINTA Warszawa",address:"Chmielna 7/9",coords:[52.23236,21.00972],time:"17:00 ‚Äì 17:40",drink:"Atak Chmielu IPA",food:"–∫—É–±–∞–Ω–æ—Å –∏–ª–∏ —Ä—ã–±–Ω—ã–π —Ç–æ—Å—Ç"},
      {order:2,name:"Hoppiness Beer & Food",address:"Chmielna 27/31",coords:[52.22925,21.01389],time:"17:45 ‚Äì 18:25",drink:"Artezan NZ West Coast IPA",food:"Hoppiness Burger"},
      {order:3,name:"BrewDog Warszawa",address:"Widok 8",coords:[52.23245,21.01105],time:"18:30 ‚Äì 19:10",drink:"Punk IPA",food:"Buffalo Wings"},
      {order:4,name:"GorƒÖczka Z≈Çota",address:"Wilcza 29",coords:[52.22538,21.013],time:"19:15 ‚Äì 19:55",drink:"Komes Porter Baltic",food:"—Ç–∞—Ç–∞—Ä—Å–∫–∏–π –±–∏—Ñ—à—Ç–µ–∫—Å"},
      {order:5,name:"Hopito Parkingowa",address:"≈ªurawia 32/34",coords:[52.22546,21.01759],time:"20:00 ‚Äì 20:40",drink:"NEIPA Tropic Vortex",food:"street‚Äëfood tacos"},
      {order:6,name:"Jabeerwocky",address:"Nowogrodzka 12",coords:[52.22852,21.01066],time:"20:45 ‚Äì 21:25",drink:"Collab DDH DIPA",food:"–∫—Ä—ç–Ω—Ü–µ–ª—å —Å –≥–æ—Ä—á–∏—Ü–µ–π"},
      {order:7,name:"Kufle i Kapsle",address:"Nowogrodzka 25",coords:[52.2285,21.0072],time:"21:30 ‚Äì 22:10",drink:"Smoky Joe Peated Stout",food:"—Å–∏–ª–µ–∑—Å–∫–∞—è –∫–æ–ª–±–∞—Å–∫–∞"},
      {order:8,name:"PiwPaw Beer Heaven",address:"Foksal 16",coords:[52.23603,21.02055],time:"22:15 ‚Äì 22:55",drink:"Gose \"Hokus Pokus\"",food:"nachos & —Å—ã—Ä–Ω—ã–π –¥–∏–ø"},
      {order:9,name:"The Alchemist Gastropub",address:"pl. Pi≈Çsudskiego 3",coords:[52.24038,21.01144],time:"23:00 ‚Äì 23:40",drink:"Self‚Äëpour Pilsner",food:"flatbread"},
      {order:10,name:"Same Krafty",address:"Nowomiejska 10",coords:[52.24909,21.01184],time:"23:50 ‚Äì 00:25",drink:"Local Saison",food:"–±—É—Ä—Ä–∞—Ç–∞‚Äë–ø–∏—Ü—Ü–∞"},
      {order:11,name:"Cze≈õƒá!",address:"Grzybowska 2",coords:[52.23666,21.00479],time:"00:35 ‚Äì 01:05",drink:"SALSA Sour Ale",food:"–ø–∞–Ω–∏–Ω–∏"},
      {order:12,name:"Drugie Dno",address:"Nowogrodzka 4",coords:[52.22928,21.01211],time:"01:15 ‚Äì ‚è∞",drink:"Barrel‚Äëaged Imperial Stout",food:"—Å—ã—Ä–Ω–∞—è –¥–æ—Å–∫–∞"}
    ];

    const sharedSnacks=[
      "Pretzel platter with mustard dips",
      "Cheese & charcuterie board (Polish selection)",
      "Nachos grande + trio of salsas",
      "Bucket of 15 buffalo wings",
      "Polish tapas set (smalec, pickles, herring)"
    ];

    const tips=[
      "–ü–æ–ª–ª–∏—Ç—Ä—ã –Ω–µ –≥–µ—Ä–æ–π—Å—Ç–≤–æ ‚Äì –±–µ—Ä–∏—Ç–µ 0,3 –ª, –ø–µ–π—Ç–µ –≤–æ–¥—É –∏ –∑–∞–∫—É—Å—ã–≤–∞–π—Ç–µ (–±—É—Ä–≥–µ—Ä—ã –≤ Hoppiness, –ø–∏—Ü—Ü–∞ –≤ Same Krafty)",
      "–ú–∞—Ä—à—Ä—É—Ç –ø–µ—à–∫–æ–º ‚Äì –≤–µ—Å—å –ø—É—Ç—å, –∫—Ä–æ–º–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –æ—Ç –ø—É–Ω–∫—Ç–∞ 11 –¥–æ Nowogrodzka (1,4 –∫–º), –ª–µ–≥–∫–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—Å—è –Ω–æ–≥–∞–º–∏; –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ä—ã–≤–æ–∫ –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –Ω–æ—á–Ω–æ–π –∞–≤—Ç–æ–±—É—Å N37 –∏–ª–∏ —Ç–∞–∫—Å–∏",
      "–†–µ–∑–µ—Ä–≤ ‚Äì –µ—Å–ª–∏ Same Krafty —É–∂–µ –∑–∞–∫—Ä—ã–ª—Å—è, –∑–∞–¥–µ—Ä–∂–∏—Ç–µ—Å—å –≤ Alchemist –∏–ª–∏ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ Piw Paw: –æ–Ω –∏–Ω–æ–≥–¥–∞ –ª—å—ë—Ç –¥–æ 02:00",
      "–¢—Ä–æ—Ñ–µ–∏ ‚Äì –¥–µ–ª–∞–π—Ç–µ —Å–µ–ª—Ñ–∏ —Å –≤—ã–≤–µ—Å–∫–∞–º–∏: –ø–æ–∫–∞–∂–µ—Ç–µ –±–∞—Ä–º–µ–Ω—É –≤ Drugie Dno –∏ —á–∞—Å—Ç–æ –ø–æ–ª—É—á–∏—Ç–µ ‚Äò–ø–æ—á—ë—Ç–Ω—ã–π –≥–ª–æ—Ç–æ–∫‚Äô –≤ –ø–æ–¥–∞—Ä–æ–∫"
    ];

    /* === Helper: Google Maps search URL === */
    const gLink=b=>`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(`${b.name}, ${b.address}, Warsaw`)}`;

    /* === Map init === */
    if(typeof L==='undefined'){
      document.body.innerHTML='<p style="padding:1rem;font-family:monospace;color:red">‚ö†Ô∏è Leaflet CDN –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.</p>';
      return;
    }

    const mapDiv=document.createElement('div');
    mapDiv.id='map';
    document.body.appendChild(mapDiv);

    const map=L.map('map').setView([52.233,21.014],14);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
      maxZoom:19,
      attribution:'&copy; OpenStreetMap contributors'
    }).addTo(map);

    /* === Markers & path === */
    const markers={},pathCoords=[];
    bars.forEach(b=>{
      const icon=L.divIcon({html:`<span class='marker-order'>${b.order}</span>`,className:''});
      const m=L.marker(b.coords,{icon}).addTo(map)
        .bindPopup(`<strong>${b.order}. <a href='${gLink(b)}' target='_blank' rel='noopener'>${b.name}</a></strong><br>${b.address}<br><em>${b.time}</em><br>üç∫ ${b.drink}<br>üçΩÔ∏è ${b.food}`);
      markers[b.order]=m;
      pathCoords.push(b.coords);
    });

    L.polyline(pathCoords,{weight:3,opacity:.8,dashArray:'6 4',color:'#ff6b00'}).addTo(map);
    map.fitBounds(pathCoords,{padding:[20,20]});

    /* === Utility: addPanel === */
    function addPanel(position,cls,html){
      const ctrl=L.control({position});
      ctrl.onAdd=()=>{
        const d=L.DomUtil.create('div',`panel ${cls}`);
        d.innerHTML=html;
        L.DomEvent.disableClickPropagation(d);
        L.DomEvent.disableScrollPropagation(d);
        return d;
      };
      return ctrl.addTo(map);
    }

    /* === Panels === */
    // Legend
    addPanel('bottomright','legend',`<h4>Legend</h4><ol>${bars.map(b=>`<li><b>${b.order}</b> <a href='${gLink(b)}' target='_blank' rel='noopener'>${b.name}</a></li>`).join('')}</ol>`);

    // Itinerary
    addPanel('topright','itinerary',`<h4>–ú–∞—Ä—à—Ä—É—Ç &nbsp;‚è∞</h4><ol>${bars.map(b=>`<li><b>${b.time}</b> ‚Äì ${b.name}</li>`).join('')}</ol>`);

    // Recommendations
    const recHtml=`<h4>–ß—Ç–æ –∑–∞–∫–∞–∑–∞—Ç—å</h4>
      <ol class='bar-list'>${bars.map(b=>`<li class='bar-item' data-order='${b.order}'>üç∫ <b>${b.name}</b><br><small>${b.drink}</small><br>üçΩÔ∏è <small>${b.food}</small></li>`).join('')}</ol>
      <hr>
      <h4>üçü Snacks for 3</h4>
      <ul>${sharedSnacks.map(s=>`<li>${s}</li>`).join('')}</ul>
      <hr>
      <h4>üöÄ –°–æ–≤–µ—Ç—ã</h4>
      <ul>${tips.map(t=>`<li>${t}</li>`).join('')}</ul>`;

    addPanel('topleft','recs',recHtml);

    /* === Click‚Äëthrough from recommendations === */
    document.addEventListener('click',e=>{
      const li=e.target.closest('.bar-item');
      if(!li)return;
      const order=parseInt(li.dataset.order,10);
      const m=markers[order];
      if(m){
        map.setView(m.getLatLng(),16,{animate:true});
        m.openPopup();
      }
    });
  });
  </script>
</head>
<body>
  <noscript><p style="padding:1rem;font-family:monospace;color:red">‚ö†Ô∏è –≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç—Ä–µ–±—É–µ—Ç JavaScript –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç—ã.</p></noscript>
</body>
</html>
